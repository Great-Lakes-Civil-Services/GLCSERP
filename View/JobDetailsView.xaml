<UserControl x:Class="CivilProcessERP.Views.JobDetailsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             Background="LightGray">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Background="White" Margin="10">
            <TextBlock Text="Great Lakes Civil Services" FontSize="22" FontWeight="Bold" Foreground="Blue"/>
            <TextBlock Text=" > Job #" FontSize="16" Margin="10,0"/>
            <TextBlock Text="{Binding Job.JobId}" FontSize="16" FontWeight="Bold"/>
        </StackPanel>

        <!-- Main Content -->
        <Grid Grid.Row="1" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*"/>
                <ColumnDefinition Width="4*"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>

            <!-- Left Column -->
            <StackPanel Grid.Column="0" Background="LightCyan" Margin="10">
                  <!-- Relationships -->
                <TextBlock Text="Relationships" FontWeight="Bold" Margin="5"/>
                <TextBlock Text="ðŸ”º 3 Other jobs with same Case#" FontStyle="Italic" Foreground="DarkRed" Margin="10,0,5,10"/>

                <TextBlock Text="Court" FontWeight="Bold" Margin="5"/>
                <TextBox Text="{Binding Job.Court}" Margin="5"/>

                <TextBlock Text="Plaintiff's Name" FontWeight="Bold" Margin="5"/>
                <TextBox Text="{Binding Job.Plaintiff}" Margin="5"/>

                <TextBlock Text="Defendant's Name" FontWeight="Bold" Margin="5"/>
                <TextBox Text="{Binding Job.Defendant}" Margin="5"/>

                <TextBlock Text="Defendant's Address" FontWeight="Bold" Margin="5"/>
                <TextBox Text="{Binding Job.Address}" Margin="5"/>

               <TextBlock Text="Attachments" FontWeight="Bold" Margin="5"/>
    <ListView x:Name="AttachmentsListView"
              ItemsSource="{Binding Job.Attachments}"
              MouseDoubleClick="AttachmentsListView_MouseDoubleClick"
              Margin="5"
              Height="100">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Purpose" DisplayMemberBinding="{Binding Purpose}" />
                <GridViewColumn Header="Format" DisplayMemberBinding="{Binding Format}" />
                <GridViewColumn Header="Description" DisplayMemberBinding="{Binding Description}" />
                <GridViewColumn Header="Status" DisplayMemberBinding="{Binding Status}" />
            </GridView>
        </ListView.View>
    </ListView>

                <!-- Workflow Status -->
                <TextBlock Text="Workflow Status" FontWeight="Bold" Margin="5"/>
                <CheckBox Content="FCM â€“ Needs First-class Mailing sent out" Margin="10,0"/>
                <CheckBox Content="SOPS â€“ Needs to be Sent Out to Process Server" Margin="10,0"/>
                <CheckBox Content="IIA â€“ Needs Invoice Items Added" Margin="10,0"/>
            </StackPanel>

            <!-- Center Column -->
            <StackPanel Grid.Column="1" Margin="10">
                <TextBlock Text="Type of Writ" FontWeight="Bold" FontSize="18" Margin="5" TextAlignment="Center"/>
                <TextBox Text="{Binding Job.TypeOfWrit}" Margin="5"/>

                <TextBlock Text="Court Date and Time" FontWeight="Bold" Margin="5"/>
                <StackPanel Orientation="Horizontal" Margin="5">
                    <TextBlock Text="Date:" Margin="5"/>
                    <TextBox Text="{Binding Job.Date}" Width="120" Margin="5"/>
                    <TextBlock Text="Time:" Margin="5"/>
                    <TextBox Text="{Binding Job.Time}" Width="120" Margin="5"/>
                </StackPanel>

                <TextBlock Text="Service Information" FontWeight="Bold" Margin="5"/>
                <TextBox Text="{Binding Job.ServiceType}" Margin="5"/>

                <TextBlock Text="Comments" FontWeight="Bold" Margin="5"/>
                <TextBox Text="{Binding Job.Comments}" Height="100" Margin="5" AcceptsReturn="True"/>

                <TextBlock Text="Change History" FontWeight="Bold" Margin="5"/>
<ListView ItemsSource="{Binding Job.ChangeHistory}" Height="120" Margin="5">
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Date" DisplayMemberBinding="{Binding Date}" Width="120"/>
            <GridViewColumn Header="Field" DisplayMemberBinding="{Binding FieldName}" Width="120"/>
            <GridViewColumn Header="Old Value" DisplayMemberBinding="{Binding OldValue}" Width="120"/>
            <GridViewColumn Header="New Value" DisplayMemberBinding="{Binding NewValue}" Width="120"/>
            <GridViewColumn Header="Changed By" DisplayMemberBinding="{Binding ChangedBy}" Width="120"/>
        </GridView>
    </ListView.View>
</ListView>


                <TextBlock Text="Attempts" FontWeight="Bold" Margin="5"/>
                <TextBox Text="{Binding Job.Attempts}" Height="100" Margin="5" AcceptsReturn="True"/>
            </StackPanel>
<!-- Right Column -->
<ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto" Margin="10" Background="LightGreen">
    <StackPanel>
        <TextBlock Text="Case #" FontWeight="Bold" Margin="5"/>
        <TextBox Text="{Binding Job.CaseNumber}" Margin="5"/>

        <TextBlock Text="Client Ref #" FontWeight="Bold" Margin="5"/>
        <TextBox Text="{Binding Job.ClientReference}" Margin="5"/>

        <TextBlock Text="Plaintiff" FontWeight="Bold" Margin="5"/>
        <TextBox Text="{Binding Job.Plaintiff}" Margin="5"/>

        <TextBlock Text="Client" FontWeight="Bold" Margin="5"/>
        <TextBox Text="{Binding Job.Client}" Margin="5" AcceptsReturn="True" Height="60"/>

        <Grid Margin="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Margin="2">
                <TextBlock Text="Process Server" FontWeight="Bold"/>
                <TextBox Text="{Binding Job.ProcessServer}" />
            </StackPanel>

            <StackPanel Grid.Column="1" Margin="2">
                <TextBlock Text="Client Status" FontWeight="Bold"/>
                <TextBox Text="{Binding Job.ClientStatus}" />
            </StackPanel>
        </Grid>

        <TextBlock Text="INVOICE" FontWeight="Bold" Margin="5"/>
        <TextBox Text="{Binding Job.Invoice}" Margin="5" AcceptsReturn="True" Height="80"/>

        <TextBlock Text="Payments" FontWeight="Bold" Margin="5"/>
        <TextBox Text="{Binding Job.Payments}" Margin="5" AcceptsReturn="True" Height="60"/>

        <TextBlock Text="Invoice Due" FontWeight="Bold" Margin="5"/>
        <TextBox Text="{Binding Job.InvoiceDue}" Margin="5"/>

        <!-- Zone + SQL DateTime -->
        <Grid Margin="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Margin="2">
                <TextBlock Text="Zone" FontWeight="Bold"/>
                <TextBox Text="{Binding Job.Zone}" />
            </StackPanel>

            <StackPanel Grid.Column="1" Margin="2">
                <TextBlock Text="SQL DateTime Created" FontWeight="Bold"/>
                <TextBox Text="{Binding Job.SqlDateTimeCreated}" />
            </StackPanel>
        </Grid>

        <!-- Expiration + Last Day to Serve -->
        <Grid Margin="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Margin="2">
                <TextBlock Text="Expiration Date" FontWeight="Bold"/>
                <TextBox Text="{Binding Job.ExpirationDate}" />
            </StackPanel>

            <StackPanel Grid.Column="1" Margin="2">
                <TextBlock Text="Last Day to Serve Date" FontWeight="Bold"/>
                <TextBox Text="{Binding Job.LastDayToServe}" />
            </StackPanel>
        </Grid>
    </StackPanel>
</ScrollViewer>
    </Grid>

        <!-- Footer Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="20">
            <Button Content="Save" Width="120" Height="40" Background="Green" Foreground="White" Margin="10"/>
            <Button Content="Cancel" Width="120" Height="40" Background="Red" Foreground="White" Margin="10"
                    Click="CloseButton_Click"/>
        </StackPanel>
    </Grid>
</UserControl>
